---
title: "Voting and Postcards"
author: "DK"
format: html
execute:
 echo: false

---

```{r}
#| cache: true
#| message: false
#| warning: false
library(tidyverse)
library(primer.data)
library(tidymodels)
library(broom)
```

```{r}
logistic_reg(engine = "glm") |> fit(factor(primary_06) ~ sex, data = shaming)
x <- shaming |> 
  mutate(civ_engage = primary_00 + primary_02 + primary_04 + 
               general_00 + general_02 + general_04) |> 
  select(primary_06, treatment, sex, age, civ_engage) |> 
  mutate(voter_class = factor(
    case_when(
      civ_engage %in% c(5, 6) ~ "Always Vote",
      civ_engage %in% c(3, 4) ~ "Sometimes Vote",
      civ_engage %in% c(1, 2) ~ "Rarely Vote"),
         levels = c("Rarely Vote", 
                    "Sometimes Vote", 
                    "Always Vote"))) |>
  mutate(voted = as.factor(primary_06))

fit_vote <- logistic_reg(engine = "glm") |>
  fit(voted ~ age + sex + treatment * voter_class, data = x)
```
$$
P(Y = 1) = \frac{1}{1 + e^{- \left( \beta_0 + \beta_1 X_1 + \beta_2 X_2 + \cdots + \beta_n X_n \right)}}
$$

$$
Y \sim \text{Bernoulli}(\rho)
$$

$$
\text{logit}(\hat{P}(\text{voted} = 1)) = -1.89 
+ 0.089 \cdot \text{treatment}_{\text{CivicDuty}} 
+ 0.125 \cdot \text{treatment}_{\text{Hawthorne}} 
+ 0.227 \cdot \text{treatment}_{\text{Self}} 
+ 0.371 \cdot \text{treatment}_{\text{Neighbors}} 
+ 0.038 \cdot \text{sex}_{\text{Male}} 
+ 0.020 \cdot \text{age}
$$


Voter turnout is influenced by both personal characteristics and social pressures. Using data from a 2006 Michigan primary election study involving thousands of voters, we examine whether receiving different types of postcards affected the likelihood of voting.One potential weakness of the model is that it relies on the assumption that the observed data is representative of the entire population, which may not hold if certain groups are underrepresented or missing systematically.